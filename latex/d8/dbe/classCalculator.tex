\hypertarget{classCalculator}{}\doxysection{Calculator Class Reference}
\label{classCalculator}\index{Calculator@{Calculator}}


The \mbox{\hyperlink{classCalculator}{Calculator}} class for calculation formula.  




{\ttfamily \#include $<$calculator.\+h$>$}

Inheritance diagram for Calculator\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{d8/dbe/classCalculator}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classCalculator_adf568b2e0dacc9adf5b7d740622beb92}{Calculator}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{classCalculator}{Calculator}} class wraper for QMu\+Parser. Make easy initialization math parser. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classCalculator_a4711c9892df9c2cb405b0ba5ccce1bde}{$\sim$\+Calculator}} () Q\+\_\+\+DECL\+\_\+\+EQ\+\_\+\+DEFAULT
\item 
qreal \mbox{\hyperlink{classCalculator_a53db208e676474674205bf0f6596213f}{Eval\+Formula}} (const \mbox{\hyperlink{classQHash}{QHash}}$<$ QString, \mbox{\hyperlink{classQSharedPointer}{QShared\+Pointer}}$<$ \mbox{\hyperlink{classVInternalVariable}{VInternal\+Variable}} $>$ $>$ $\ast$vars, const QString \&formula)
\begin{DoxyCompactList}\small\item\em eval calculate formula. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classCalculator_aa159100b1087d2e01e473d32de808c22}{Init\+Variables}} (const \mbox{\hyperlink{classQHash}{QHash}}$<$ QString, \mbox{\hyperlink{classQSharedPointer}{QShared\+Pointer}}$<$ \mbox{\hyperlink{classVInternalVariable}{VInternal\+Variable}} $>$ $>$ $\ast$vars, const \mbox{\hyperlink{classQMap}{QMap}}$<$ int, QString $>$ \&tokens, const QString \&formula)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{classCalculator_aa159100b1087d2e01e473d32de808c22}{Calculator\+::\+Init\+Variables}} add variables to parser. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{classCalculator}{Calculator}} class for calculation formula. 

Main purpose make easy evaluate value of formula and get tokens. Note. If created to many parser for different purpes in the same time parser can work wrong. Example\+: \mbox{\hyperlink{classEditFormulaDialog}{Edit\+Formula\+Dialog}} $\ast$dialog = new \mbox{\hyperlink{classEditFormulaDialog}{Edit\+Formula\+Dialog(data)}}; dialog-\/$>$Set\+Formula(formula); if (dialog-\/$>$exec() == QDialog\+::\+Accepted) \{ formula = dialog-\/$>$Get\+Formula(); //\+Need delete dialog here because parser in dialog don\textquotesingle{}t allow use correct separator for parsing here. //\+Don\textquotesingle{}t know why. delete dialog; QScoped\+Pointer$<$\+Calculator$>$ cal(new Calculator()); result = cal-\/$>$Eval\+Formula(data-\/$>$Plain\+Variables(), formula); \} 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classCalculator_adf568b2e0dacc9adf5b7d740622beb92}\label{classCalculator_adf568b2e0dacc9adf5b7d740622beb92}} 
\index{Calculator@{Calculator}!Calculator@{Calculator}}
\index{Calculator@{Calculator}!Calculator@{Calculator}}
\doxysubsubsection{\texorpdfstring{Calculator()}{Calculator()}}
{\footnotesize\ttfamily Calculator\+::\+Calculator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\mbox{\hyperlink{classCalculator}{Calculator}} class wraper for QMu\+Parser. Make easy initialization math parser. 

This constructor hide initialization variables, operators, character sets. Use this constuctor for evaluation formula. All formulas must be converted to internal look. Example\+:

const QString formula = q\+App-\/$>$Formula\+From\+User(edit-\/$>$text()); \mbox{\hyperlink{classCalculator}{Calculator}} $\ast$cal = new \mbox{\hyperlink{classCalculator}{Calculator(data, pattern\+Type)}}; const qreal result = cal-\/$>$Eval\+Formula(data-\/$>$Plain\+Variables(), formula); delete cal; \mbox{\Hypertarget{classCalculator_a4711c9892df9c2cb405b0ba5ccce1bde}\label{classCalculator_a4711c9892df9c2cb405b0ba5ccce1bde}} 
\index{Calculator@{Calculator}!````~Calculator@{$\sim$Calculator}}
\index{````~Calculator@{$\sim$Calculator}!Calculator@{Calculator}}
\doxysubsubsection{\texorpdfstring{$\sim$Calculator()}{~Calculator()}}
{\footnotesize\ttfamily virtual Calculator\+::$\sim$\+Calculator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classCalculator_a53db208e676474674205bf0f6596213f}\label{classCalculator_a53db208e676474674205bf0f6596213f}} 
\index{Calculator@{Calculator}!EvalFormula@{EvalFormula}}
\index{EvalFormula@{EvalFormula}!Calculator@{Calculator}}
\doxysubsubsection{\texorpdfstring{EvalFormula()}{EvalFormula()}}
{\footnotesize\ttfamily qreal Calculator\+::\+Eval\+Formula (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classQHash}{QHash}}$<$ QString, \mbox{\hyperlink{classQSharedPointer}{QShared\+Pointer}}$<$ \mbox{\hyperlink{classVInternalVariable}{VInternal\+Variable}} $>$ $>$ $\ast$}]{vars,  }\item[{const QString \&}]{formula }\end{DoxyParamCaption})}



eval calculate formula. 

First we try eval expression without adding variables. If it fail, we take tokens from expression and add variables to parser and try again.


\begin{DoxyParams}{Parameters}
{\em formula} & string of formula. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
value of formula. 
\end{DoxyReturn}
\mbox{\Hypertarget{classCalculator_aa159100b1087d2e01e473d32de808c22}\label{classCalculator_aa159100b1087d2e01e473d32de808c22}} 
\index{Calculator@{Calculator}!InitVariables@{InitVariables}}
\index{InitVariables@{InitVariables}!Calculator@{Calculator}}
\doxysubsubsection{\texorpdfstring{InitVariables()}{InitVariables()}}
{\footnotesize\ttfamily void Calculator\+::\+Init\+Variables (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classQHash}{QHash}}$<$ QString, \mbox{\hyperlink{classQSharedPointer}{QShared\+Pointer}}$<$ \mbox{\hyperlink{classVInternalVariable}{VInternal\+Variable}} $>$ $>$ $\ast$}]{vars,  }\item[{const \mbox{\hyperlink{classQMap}{QMap}}$<$ int, QString $>$ \&}]{tokens,  }\item[{const QString \&}]{formula }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



\mbox{\hyperlink{classCalculator_aa159100b1087d2e01e473d32de808c22}{Calculator\+::\+Init\+Variables}} add variables to parser. 

For optimization purpose we try don\textquotesingle{}t add variables that we don\textquotesingle{}t need.


\begin{DoxyParams}{Parameters}
{\em vars} & list of variables. \\
\hline
{\em tokens} & all tokens (measurements names, variables with lengths) that parser have found in expression. \\
\hline
{\em formula} & expression, need for throwing better error message. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/libs/vpatterndb/\mbox{\hyperlink{vpatterndb_2calculator_8h}{calculator.\+h}}\item 
src/libs/vpatterndb/\mbox{\hyperlink{vpatterndb_2calculator_8cpp}{calculator.\+cpp}}\end{DoxyCompactItemize}
